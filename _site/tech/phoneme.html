
<!DOCTYPE>
<html lang="zh-cn" data-scribe-reduced-action-queue="true">
    <head>
        <meta content='基于音素识别的语音相似度研究 - Rowl1ng|黑客与画家' name='title' />
        <meta content='基于音素识别的语音相似度研究 - Rowl1ng|黑客与画家' name='og:title' />
        <title>基于音素识别的语音相似度研究 - Rowl1ng|黑客与画家</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>基于音素识别的语音相似度研究 - Rowl1ng|黑客与画家</title>
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="基于音素识别的语音相似度研究 - Rowl1ng|黑客与画家">
<meta name="twitter:keywords"  content="应用场景通话录音内容审核功能：关键词检索，实现内容审核。  首先要进行音频预处理，包括音频格式转码、语音降噪等，然后存储处理后的文件；  把结果反馈给业务网关，由音频比对对已知录音片段进行检测，如果有匹配这些录音片段就反馈结果——存在..." property='og:description' />
<meta property="og:type" content="article">
<meta property="og:title" content="基于音素识别的语音相似度研究 - Rowl1ng|黑客与画家">
<meta property="og:description" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="og:keywords"  content="应用场景通话录音内容审核功能：关键词检索，实现内容审核。  首先要进行音频预处理，包括音频格式转码、语音降噪等，然后存储处理后的文件；  把结果反馈给业务网关，由音频比对对已知录音片段进行检测，如果有匹配这些录音片段就反馈结果——存在..." property='og:description' />
<meta name="theme-Jekyll by Rowl1ng" content="#eb5055">
<link rel="icon" type="image/png" href="http://localhost:4000/style/favicons/favicon.ico" />
<link href="http://localhost:4000/style/favicons/favicon.ico" rel="shortcut icon" type="image/png">
<link rel="canonical" href="http://localhost:4000/">
<link rel="alternate" type="application/rss+xml" title="Rowl1ng" href="http://localhost:4000/feed.xml">
<meta charset="UTF-8">
<link rel="manifest" href="/manifest.json">
<link rel="shortcut icon" href="http://localhost:4000/style/favicons/favicon.ico" type="image/x-icon">
<meta name="keywords"  content="应用场景通话录音内容审核功能：关键词检索，实现内容审核。  首先要进行音频预处理，包括音频格式转码、语音降噪等，然后存储处理后的文件；  把结果反馈给业务网关，由音频比对对已知录音片段进行检测，如果有匹配这些录音片段就反馈结果——存在..." property='og:description' />
<meta name="description" content="nothing is more practicla than a good theory" />
<link href="https://cdn.bootcss.com/highlight.js/9.10.0/styles/xcode.min.css" rel="stylesheet">

<link href="http://localhost:4000/style/style-rowl1ng.css" rel="stylesheet">

    <meta content='http://localhost:4000/tech/phoneme.html' property='og:url' />
    <meta content="为了诈骗识别任务探索如何不经过ASR找出相似内容的语音" property='og:description' />
    <meta content="article" property="og:type" />


    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-71226909-1', 'auto');
        ga('send', 'pageview');
    </script>

    </head>
    <body class="" gtools_scp_screen_capture_injected="true">
        <header id="header" class="header bg-white">
            <div class="navbar-container">
                <a href="/?rowl1ng" title="访问 Rowl1ng|黑客与画家" class="navbar-logo"> <img src="http://localhost:4000/style/images/logo-rowl1ng.png" alt="Rowl1ng|黑客与画家"> </a>
                <div class="navbar-menu">
                    
                        <a href="http://localhost:4000/tech">技术</a>
                    
                        <a href="http://localhost:4000/art">艺术</a>
                    
                        <a href="http://localhost:4000/book">读书</a>
                    
                        <a href="http://localhost:4000/write">写作</a>
                    
                        <a href="http://localhost:4000/archives">归档</a>
                    
                        <a href="http://localhost:4000/tags">标签</a>
                    
                        <a href="http://localhost:4000/about">关于</a>
                    
                </div>
                <div class="navbar-search" onclick="">
                    <span class="icon-search"></span>
                    <form id="cb-search-btn" role="search">
                        <span class="search-box">
                             <input type="text" class="input" id="cb-search-content" required="true" placeholder="标题 标签..." maxlength="30" autocomplete="off">
                        </span>
                    </form>
                </div>
                <div class="navbar-mobile-menu" onclick="">
                    <span class="icon-menu cross"><span class="middle"></span></span>
                    <ul>
                        
                            <li><a href="http://localhost:4000/tech">技术</a></li>
                        
                            <li><a href="http://localhost:4000/art">艺术</a></li>
                        
                            <li><a href="http://localhost:4000/book">读书</a></li>
                        
                            <li><a href="http://localhost:4000/write">写作</a></li>
                        
                            <li><a href="http://localhost:4000/archives">归档</a></li>
                        
                            <li><a href="http://localhost:4000/tags">标签</a></li>
                        
                            <li><a href="http://localhost:4000/about">关于</a></li>
                        
                    </ul>
                </div>
            </div>
        </header>
        <div class="post-header-thumb bg-white}">
            <div class="post-header-thumb-op"></div>
            <div class="post-header-thumb">
                <div class="post-header-thumb-container">
                    <h1 class="post-title" itemprop="name headline">
                        基于音素识别的语音相似度研究</h1>
                    <div class="post-data">
                        <time datetime="2017-08-01 13:27:00" itemprop="datePublished">发布时间：2017-08-01 13:27:00</time>
                        <a href="/tags#tech" title="访问 tech" data-hover="博客分类: tech">博客分类: tech</a>
                        <!--busuanzi-->
                        <script async src="/js/busuanzi.pure.mini.js">
                        </script>
                        <span id="busuanzi_container_page_pv">
                          阅读次数: <span id="busuanzi_value_page_pv"></span>
                        </span>
                        <!--<a href="#read"> 阅读次数: comments</a>-->
                    </div>
                    <div class="post-tags">
                        
                            
                            
                                
                                <a href="/tags#语音处理" title="访问语音处理" data-hover="语音处理">
                                    语音处理 <span>(1)</span>
                                    
                                </a>
                                
                                <a href="/tags#深度学习" title="访问深度学习" data-hover="深度学习">
                                    深度学习 <span>(1)</span>
                                    
                                </a>
                                
                            
                            
                        
                    </div>
                </div>
            </div>
        </div>
        <article class="main-content post-page" itemscope itemtype="http://schema.org/Article">
            <div class="post-header">
                <h1 class="post-title" itemprop="name headline">
                    基于音素识别的语音相似度研究</h1>
                <div class="post-data">
                    <time datetime="2017-08-01 13:27:00" itemprop="datePublished">2017-08-01 13:27:00</time>
                </div>
            </div>
            <div id="post-content" class="post-content" itemprop="articleBody">
                <p class="post-tags">
                    
                        
                        
                            
                                <a href="/tags#语音处理" title="访问语音处理" data-hover="语音处理">
                                    语音处理 <span>(1)</span>
                                    
                                </a>
                            
                                <a href="/tags#深度学习" title="访问深度学习" data-hover="深度学习">
                                    深度学习 <span>(1)</span>
                                    
                                </a>
                            
                        
                        
                    
                </p>
                <h1 id="应用场景">应用场景</h1>

<p>通话录音内容审核功能：关键词检索，实现内容审核。</p>

<ol>
  <li>首先要进行音频预处理，包括音频格式转码、语音降噪等，然后存储处理后的文件；</li>
  <li>把结果反馈给业务网关，由音频比对对已知录音片段进行检测，如果有匹配这些录音片段就反馈结果——存在诈骗信息。</li>
  <li>如果经过音频比对没有发现诈骗信息，就调用关键词检索服务。</li>
</ol>

<h1 id="研究背景">研究背景</h1>

<p>音频可分为有内容和无内容两种。针对不同的数据类型有不同的检测技术。针对说话内容有语音识别、关键词检索等；针对语种的判别有语种识别技术；针对说话人的识别有声纹识别技术；针对说话内容无关的通常采用音频对比的技术进行检测。</p>

<h2 id="无内容音频对比技术">无内容：音频对比技术</h2>

<p>音频对比主要是从音频信号中提取特征，通过特征进行比对来检索。参考案例<a href="https://github.com/worldveil/dejavu">dejavu</a>。</p>

<p><img src="http://static.zybuluo.com/sixijinling/bfniz4zkgsfqhp4vyaiw6aun/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-11-26%2013.54.59.png" alt="屏幕快照 2017-11-26 13.54.59.png-1749.8kB" /></p>

<ul>
  <li>提取特征：图中提取的特征点就是频谱最大值点。</li>
  <li>特征构建：特征是通过最大值点之间的距离来建模，例如本案例中就采用的是两个最大值点的距离、位置信息作为一个固定的特征作为音频特征信息。</li>
</ul>

<p>有了上述音频特征后，就可以对两个不同音频进行检索，最大相似度的地方就是相似点。需要指出的是，这种技术最适用于录音片段的检索，如若音频内容相同但演绎方式不同（如不同人用不同语速、声调，使得提取的特征点不同）则无法有效识别。</p>

<h2 id="有内容语音识别关键词检测">有内容：语音识别、关键词检测</h2>

<p><img src="http://static.zybuluo.com/sixijinling/6c7imoqzgk405jznwfku1ol2/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-11-26%2013.52.57.png" alt="屏幕快照 2017-11-26 13.52.57.png-59.4kB" /></p>

<p>相比语音助手等其他语音交互相关应用，话务场景下的识别准确率更为关键。然而，在电话录音识别检测场景中，通话质量不佳会导致准确率下降。
改进方向：</p>

<ul>
  <li>不完全依赖ASR；</li>
  <li>即使通话质量不佳，也能取得较好的检索效果。</li>
</ul>

<h3 id="语音关键词检出std">语音关键词检出（STD）</h3>

<p>语音关键词检出是从给定的语料数据中查询指定关键词是否出现的任务.该任务在语音检索、电话监控、舆情分析等领域具有广泛的应用.根据关键词的输入形式,该任务可以分为基于文本和基于语音样例两种类型：</p>

<ul>
  <li>传统的基于文本的关键词检出技术又称为关键词搜索(keyword search,KWS)，通常基于一个大词汇量连续语音识别系统,在识别的NBest结果或者网格上进行搜索.</li>
  <li>近年来，<strong>基于样例的语音关键词检出</strong> (query-by-example spoken term detection,<strong>QbyE-STD</strong>)成为新的研究热点.</li>
</ul>

<p>QbyE-STD目前通常有３种实现方法：</p>

<ul>
  <li>借鉴传统语音关键词检出的思路,称之为声学关键词检出(acoustic keyword spotting,AKWS).</li>
  <li>借助其他语种成熟的语音识别系统进行解码,将查询样例和待检语音转换成<strong>音素序列</strong>或音
素网格,而后进行字符串匹配,该类方法称之为字符搜索(symbolic search,SS).此类方法通常采用加权有限状态机(weighted finite state transducer,WFST)建立索引并进行快速查找.</li>
  <li>基于经典的模板匹配的思路,采用动态时间规整(dynamictimewarping,DTW)将查询样例和待查语句进行匹配.由于查询语句的时长通常远远大于样例时长,因此需要在语句上进行<strong>滑动查找</strong>,常用策略包括Segmental-DTW、Subsequence-DTW
、SLN-DTW (segmental local normalized-DTW)等。</li>
</ul>

<p><img src="http://static.zybuluo.com/sixijinling/q0w321vdv4zdy3hwi0s35ppn/s-dtw.png" alt="s-dtw.png-1102.9kB" /></p>

<h2 id="改进方案音素识别">改进方案：音素识别</h2>

<p>结合应用场景，使用语音关键词检索技术，将通话录音识别结果输出音频检索网络，将指定的语音关键词转换成音素在检索网络中进行匹配，输出检索结果。</p>

<p><img src="http://static.zybuluo.com/sixijinling/wqzbspz624qlnbqbur3dgvcz/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-11-26%2013.50.48.png" alt="屏幕快照 2017-11-26 13.50.48.png-66kB" /></p>

<h1 id="语音关键词检索">语音关键词检索</h1>

<p>这种方式不仅绕开了生成文字所需的解码过程，提高检索效率，还能避免语音转文字可能带来的误差，提高识别准确率。例如将人名「张珊」转写成「张山」后就无法准确的检索正确的人名，而基于音素的检索是使用「zhang shan」进行匹配，很大概率上可以命中关键词。</p>

<p><img src="http://static.zybuluo.com/sixijinling/bf6i2h3q8o8iwyzfmiigwwpn/std.png" alt="std.png-325.8kB" /></p>

<h2 id="特征提取识别音素">特征提取：识别音素</h2>

<h3 id="音素后验概率">音素后验概率</h3>

<p>给定一帧语音的谱特征向量<script type="math/tex">a</script>，后验特征定义为在K个类别C1,C2,…,CK上的后验概率分布：
<script type="math/tex">P = [P(C_1|a),P(C_2|a),\dots,P(C_K|a)]</script>
<script type="math/tex">P(C_i|a)</script>谱特征(<script type="math/tex">a</script>)在<script type="math/tex">C_i</script>(某个音素)上的后验概率，更好的鲁棒性（不同说话人）。
例如，类别定义为音素，训练基于HMM的音素识别器对语音数据进行<code class="highlighter-rouge">解码</code>，得到在每个音素上的<code class="highlighter-rouge">打分</code>即为音素后验特征。 与此类似，针对语音数据训练具有K个成分Gauss混合模型(GMM)，然后对每帧语音数据在K个Gauss成分上打分，即可得到<strong>GMM后验特征</strong>(GMM posterior)。
一般来说，音素后验特征在基于DTW的QbE-STD任务中的效果最好。 但是对于少资源语言来说，在没有该语种的专家知识和标注数据的情况下，通常无法训练音素识别器。 借用<code class="highlighter-rouge">其他语种</code>的音素识别器(不匹配音素识别)来获得音素后验特征，是一种普遍采用的做法。 此外，采用机器学习方法自动发现某种语言中的<code class="highlighter-rouge">“类音素”子词单元</code>，获得类音素后验特征也是一种可行的方法。</p>

<script type="math/tex; mode=display">r(q_i,d_j)=\frac{U(q_{i}\cdot d_{j})-||q_i||||d_j||}{\sqrt {(U||q_i||^2-||q_i||)(U||d_j||^2-||d_j||)}}</script>

<h3 id="ctc的tensorflow实现">CTC的tensorflow实现</h3>

<p><a href="https://github.com/Rowl1ng/phoneme-ctc">github项目地址</a></p>

<h2 id="实验数据">实验数据</h2>

<p>采集了16人（8男8女）的语音数据，每人20句话。通过DTW计算相似度，设定阈值判断是否是相同内容。</p>

<blockquote>
  <p>“当我还只有六岁的时候，在一本描写原始森林，名叫《真实的故事》的书中， 看到了一副精彩的插画，画的是一条蟒蛇正在吞食一只大野兽，下面就是那副画的摹本”
“这本书中写道：’这些蟒蛇把它们的猎获物不加咀嚼地吞下，一会儿后就不能再动弹了，它们就在长长的六个月的睡眠中消化这些食物。’”
……
——截选自《小王子》</p>
</blockquote>

<h2 id="实验效果">实验效果</h2>

<ul>
  <li>传统MFCC:对音频进行傅立叶变换，提取频谱能量分布特征</li>
  <li>音素后验概率:训练音素识器，将音素识别结果作为特征
    <ul>
      <li>英文音素(39种)</li>
      <li>中文音素(67种)</li>
    </ul>
  </li>
</ul>

<p><img src="http://static.zybuluo.com/sixijinling/o6i3xw4f4qgsc3j1pf4x33ir/%E5%AE%9E%E9%AA%8C%E6%95%88%E6%9E%9C.png" alt="实验效果.png-179.3kB" /></p>

<h1 id="future-work">Future work</h1>

<h2 id="todo-list">Todo list</h2>

<ul>
  <li>提升效率：DTW算法的时间复杂度是O(M x N)，尝试使用监督学习方法训练端到端识别网络，降低时间复杂度；</li>
  <li>文本关键词检索：先将文本关键词转化为对应的音素特征，再来进行检索。</li>
  <li>不确定是否需要一些标准化的措施。
    <h2 id="things-to-learn">Things to learn</h2>
  </li>
</ul>

<p>查询样例转换成音素序列后怎么查找</p>

<ul>
  <li>网格？</li>
  <li>音素边界</li>
</ul>

<h1 id="补充">补充</h1>

<h2 id="少资源语言关键词检出评测quesst">少资源语言关键词检出评测(QUESST)</h2>

<p>跑通了上周提到的完成QUESST任务的一个项目，其使用的是BUT大学提供的<code class="highlighter-rouge">phnrec</code>工具来提取音素后验概率（音素模型是已经训练好的）。目前在Quesst数据集上跑通了，利用<code class="highlighter-rouge">phnrec</code>提取了自己采集的数据集的后验概率，之后还要进一步探索。</p>

<p>具体参考<a href="http://speech.fit.vutbr.cz/software/quesst-2014-multilingual-database-query-by-example-keyword-spotting">QUESST 2014 Multilingual Database for Query-by-Example Keyword Spotting</a></p>

<blockquote>
  <p>QUESST瞄准少资源语言的关键词检出，评测数据中包含多种少资源语言的未标注语音数据，语音文件来自不同录制环境和多种说话风格，部分语音文件带有较强的背景噪声。</p>
</blockquote>

<blockquote>
  <p>QUESST 2014任务提供了包含23 h的检索语料库，共12492句话。 用于算法调试的发展集关键词560个，最终评测集关键词555个。 语料涉及斯洛伐克语、 罗马尼亚语、 阿尔巴尼亚语、 捷克语、 巴斯克语和英语等6种语言，其中英语部分多来自非母语说话人。 在评测任务期间，语料库不提供任何语种信息。</p>
</blockquote>

<blockquote>
  <p>评测任务分为3种不同类型的查询：</p>
</blockquote>

<blockquote>
  <ul>
    <li>1) 精确查询T1： 在语料库中找出与查询关键词精确匹配的地方。</li>
    <li>2) 近似查询T2： 允许前后缀不同的匹配，例如给定的关键词是“friend”，可以匹配到语料库中包含“friendly”和“friends”单词的句子。</li>
    <li>3) 近似查询T3： 在T2类型的基础上允许填充词和次序颠倒的匹配，例如给定的关键词为“white house”，在语料库中可以找到包含“house is whiter”的句子。</li>
  </ul>
</blockquote>

<blockquote>
  <p>评测结果采用最小交叉熵(Cnxe)和TWV(term weighted value)来衡量。 为了计算这2项指标，参加评测的队伍需要提交每个关键词在语料库中每个句子上的打分，用以表示该关键词与该句子的匹配分数。</p>
</blockquote>

<h2 id="语音智能客服">语音智能客服</h2>

<p><img src="http://static.zybuluo.com/sixijinling/065pnzbrgs904fre9ejsm4vn/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-11-26%2014.13.59.png" alt="屏幕快照 2017-11-26 14.13.59.png-239.2kB" /></p>


                <p class="post-info">
                    本文由 <a href="/">Rowl1ng</a> 创作，采用 <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank" rel="external nofollow">知识共享署名4.0</a> 国际许可协议进行许可<br>本站文章除注明转载/出处外，均为本站原创或翻译，转载前请务必署名<br>最后编辑时间为:2017-08-01 13:27:00
                </p>

            </div>
            <div id="container"></div>
            <link rel="stylesheet" href="/css/gitment.css">
            <script src="/js/gitment.browser.js"></script>
            <script>
                var gitment = new Gitment({
                    owner: 'Rowl1ng',
                    repo: 'rowl1ng.github.io',
                    oauth: {
                        client_id: 'd3a4fe07f0e275a814af',
                        client_secret: '568c448355abf329a831ea9e1cbcaf94dab7ce8b',
                    },
                })
                gitment.render('container')
            </script>
            <!--<div id="gitmentContainer"></div>-->
            <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
            <!--<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>-->
            <!--<script>-->
                <!--var gitment = new Gitment({-->
                    <!--owner: 'Rowl1ng',-->
                    <!--repo: 'rowl1ng.github.io',-->
                    <!--oauth: {-->
                        <!--client_id: 'd3a4fe07f0e275a814af',-->
                        <!--client_secret: '568c448355abf329a831ea9e1cbcaf94dab7ce8b',-->
                    <!--},-->
                <!--});-->
                <!--gitment.render('gitmentContainer');-->
            <!--</script>-->

        </article>
        <footer class="footer bg-white">
    <div class="footer-social">
        <div class="footer-container clearfix">
            <div class="social-list">
                <!--<a class="social segmentfault" target="blank" href="https://segmentfault.com/u/rowl1ng" title="访问 LiberXue_Twitter" data-hover="Segmentfault">Segmentfault</a>-->
                <a class="social github" target="blank" href="https://github.com/rowl1ng" title="访问 Rowl1ng_Github" data-hover="GitHub">GitHub</a>
                <a class="social deviantart" target="blank" href="https://sixijinling.deviantart.com/" title="访问 Rowl1ng_deviantart" data-hover="deviantart">Deviantart</a>
                <a class="social bilibili" target="blank" href="https://space.bilibili.com/3556743/#!/index" title="访问 Rowl1ng_bilibili" data-hover="bilibili">bilibili</a>
                <!--<a class="social twitter" target="blank" href="http://twitter.com/rowl1ng" title="访问 LiberXue_Twitter" data-hover="Twitter">Twitter</a>-->
                <!--<a class="social stackoverflow" target="blank" href="https://stackoverflow.com/users/6902190/rowl1ng" title="访问 LiberXue_stackoverflow" data-hover="StackOverflow">StackOverflow</a>-->
                <a class="social douban" target="blank" href="https://www.douban.com/people/rowl1ng/" title="访问 Rowl1ng_douban" data-hover="douban">douban</a>
                <a class="social rss" target="blank" href="/feed.xml"title="访问 Rowl1ng_RSS" data-hover="RSS">RSS</a>
            </div>
        </div>
    </div>
    <div class="footer-meta">
        <div class="footer-container">
            <div class="meta-item meta-copyright">
                <div class="meta-copyright-info">
                    <a href="/" class="info-logo">
                        <img src="http://localhost:4000/style/images/logo-rowl1ng.png"   title="访问 Rowl1ng_blog" data-hover="Rowl1ng_blog" alt="Rowl1ng_blog" /> </a>
                    <div class="info-text">
                        <p>Theme is <a href="http://rowl1ng.com/2017/08/03/Jekyllthemes.html" title="访问 Jekyll Rowl1ng主题"  data-hover="Jekyll Rowl1ng"target="_blank">Jekyll rowl1ng</a> by <a href="http://rowl1ng.com/about" target="_blank">Rowl1ng</a></p>
                        <p>Powered by <a href="http://localhost:4000/tags/#Jekyll" title="Jekyll" data-hover="Jekyll" target="_blank" rel="nofollow">Jekyll</a></p>
                        <p>&copy; 2018 <a href="/feed.xml"  title="访问 Rowl1ng blog RSS" data-hover="Rowl1ng blog RSS">Rowl1ng blog RSS</a></p>
                        <p>
                            <span id="busuanzi_container_site_uv" style="display: inline">
                           本站 UV <a href="http://ibruce.info" target="_blank"><span id="busuanzi_value_site_uv"></span></a>
                            </span>
                            本站 PV <span id="busuanzi_container_site_pv" style="display: inline"></span>
                                <span id="busuanzi_value_site_pv"></span>
                        </p>
                        <!--<p>总计文章：篇</p>-->
                    </div>
                </div>
            </div>
            <div class="meta-item meta-posts">
                <h3 class="meta-title">置顶文章</h3>
                <!--置顶-->
                
                
                
                
                
                
                
                
                
                
                <li><a href="/tech/chatbot.html" title="访问 基于Rasa_NLU的微信chatbot" data-hover="基于Rasa_NLU的微信chatbot">基于Rasa_NLU的微信chatbot</a></li>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                <!--置顶-->
            </div>
            <div class="meta-item meta-comments">
                <h3 class="meta-title">最新文章</h3>
                
                <!---->
                
                <!---->
                
                <!---->
                    <li><a href="/book/English.html" title="访问 各种英语考试的经验" data-hover="各种英语考试的经验">各种英语考试的经验</a></li>
                <!---->
                
                <!---->
                
                <!---->
                
                <!---->
                
                <!---->
                
                <!---->
                
                <!---->
                
                <!---->
                
                <!---->
                    <li><a href="/book/Socialism.html" title="访问 《观念的水位》+《柏林墙》" data-hover="《观念的水位》+《柏林墙》">《观念的水位》+《柏林墙》</a></li>
                <!---->
                
                <!---->
                
                <!---->
                    <li><a href="/book/watch_TV.html" title="访问 爱好：看电视" data-hover="爱好：看电视">爱好：看电视</a></li>
                <!---->
                
                <!---->
                
            </div>
        </div>
    </div>
</footer>
<script src="//cdn.bootcss.com/jquery/2.2.2/jquery.min.js"></script>
<script src="//cdn.bootcss.com/bootstrap-3-typeahead/4.0.2/bootstrap3-typeahead.js"></script>
<script src="/search/js/cb-search.js"></script>
<script>
    $(function () {
        setTimeout(function () {
            $('code').removeClass('hljs');
            $('code').removeClass('language');
        }, 90);
    });
    (function(){
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        }
        else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>
        <div id="directory-content" class="directory-content">
            <div id="directory"></div>
        </div>
        <script>
            var postDirectoryBuild = function() {
                var postChildren = function children(childNodes, reg) {
                    var result = [],
                        isReg = typeof reg === 'object',
                        isStr = typeof reg === 'string',
                        node, i, len;
                    for (i = 0, len = childNodes.length; i < len; i++) {
                        node = childNodes[i];
                        if ((node.nodeType === 1 || node.nodeType === 9) &&
                            (!reg ||
                                isReg && reg.test(node.tagName.toLowerCase()) ||
                                isStr && node.tagName.toLowerCase() === reg)) {
                            result.push(node);
                        }
                    }
                    return result;foot
                },
                createPostDirectory = function(article, directory, isDirNum) {
                    var contentArr = [],
                        titleId = [],
                        levelArr, root, level,
                        currentList, list, li, link, i, len;
                    levelArr = (function(article, contentArr, titleId) {
                        var titleElem = postChildren(article.childNodes, /^h\d$/),
                            levelArr = [],
                            lastNum = 1,
                            lastRevNum = 1,
                            count = 0,
                            guid = 1,
                            id = 'directory' + (Math.random() + '').replace(/\D/, ''),
                            lastRevNum, num, elem;
                        while (titleElem.length) {
                            elem = titleElem.shift();
                            contentArr.push(elem.innerHTML);
                            num = +elem.tagName.match(/\d/)[0];
                            if (num > lastNum) {
                                levelArr.push(1);
                                lastRevNum += 1;
                            } else if (num === lastRevNum ||
                                num > lastRevNum && num <= lastNum) {
                                levelArr.push(0);
                                lastRevNum = lastRevNum;
                            } else if (num < lastRevNum) {
                                levelArr.push(num - lastRevNum);
                                lastRevNum = num;
                            }
                            count += levelArr[levelArr.length - 1];
                            lastNum = num;
                            elem.id = elem.id || (id + guid++);
                            titleId.push(elem.id);
                        }
                        if (count !== 0 && levelArr[0] === 1) levelArr[0] = 0;
                        return levelArr;
                    })(article, contentArr, titleId);
                    currentList = root = document.createElement('ul');
                    dirNum = [0];
                    for (i = 0, len = levelArr.length; i < len; i++) {
                        level = levelArr[i];
                        if (level === 1) {
                            list = document.createElement('ul');
                            if (!currentList.lastElementChild) {
                                currentList.appendChild(document.createElement('li'));
                            }
                            currentList.lastElementChild.appendChild(list);
                            currentList = list;
                            dirNum.push(0);
                        } else if (level < 0) {
                            level *= 2;
                            while (level++) {
                                if (level % 2) dirNum.pop();
                                currentList = currentList.parentNode;
                            }
                        }
                        dirNum[dirNum.length - 1]++;
                        li = document.createElement('li');
                        link = document.createElement('a');
                        link.href = '#' + titleId[i];
                        link.title = '访问' + titleId[i];
                        link.title = '访问' + titleId[i];
                        link.innerHTML = !isDirNum ? contentArr[i] :
                            dirNum.join('.') + ' ' + contentArr[i] ;
                        li.appendChild(link);
                        currentList.appendChild(li);
                    }
                    directory.appendChild(root);
                };
                createPostDirectory(document.getElementById('post-content'),document.getElementById('directory'), true);
            };
            postDirectoryBuild();
        </script>
        <script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
        <script >lang=hljs.initHighlightingOnLoad();</script>
        
        <!--<script type="text/javascript" async-->
                <!--src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">-->
        <!--</script>-->
        <script type="text/javascript" async
                src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
        </script>
        
        <!--<script type='text/javascript' -->
                <!--href='https://use.typekit.net/cwj3gfk.js'>-->
        <!--</script>-->
        <!--<script type='text/javascript'). try{Typekit.load({ async: true });}catch(e){}>-->
        <!--</script>-->
    </body>
</html>